{% extends "django_sb_admin/base.html" %}
<!doctype html>
{% block sb_admin_header %}
  {% block branding %}
    <img src="/static/Riyadh-metro-logo.png" style="background: transparent;width: 60px;">
    <!-- <h1 id="site-name">Asset Optima</h1> -->
  {% endblock %}
{% endblock sb_admin_header %}
{% block sb_admin_content %}
              <!-- Page Heading -->

            <div class="row mb-3">
                <div class="col-lg-6">
                    <h3 class="page-header">
                       NCR (Non-Conformity Report) Generation
                    </h3>
                  
                </div>

                 <div class="col-lg-6 mb-3">
    
    
                    <a href="/forms/ncr_register/"><button class="btn btn-primary btn-icon-split float-right m-2" > 
                    <span class="icon text-white-50">
                        <i class="fas fa-angle-left"></i>
                        </span>             
                    <span class="text">Back</span>
                    </button></a>
                
                </div>

            </div>
 

                <div class="row " style="padding: 20px;">

                    <div class="col-lg-6 " >
                        <div class="row ">

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="ncr_gen_id">NON-CONFORMITY REPORT No:</label>
                                    <b>{{data.ncr_gen_id}}</b>
                                </div>
                            </div>

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="inspector_name">Name of the inspector (NCR Raised):</label>
                                    <b>{{data.inspector_name}}</b>
                                </div>
                            </div>

                              <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="project_name">PROJECT NAME:</label>
                                   <b>{{data.project_name}}</b>
                                </div>
                            </div>

                            <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="assembly_name">PART Description /ASSEMBLY NAME:</label>
                                   <b>{{data.assembly_name}}</b>
                                </div>
                            </div>

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="assembly_no">PART or ASSEMBLY No:</label>
                                   <b>{{data.assembly_no}}</b>
                                </div>
                            </div>

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="drawing_no">Drawing No  NA:</label>
                                    <b>{{data.drawing_no}}</b>
                                </div>
                            </div>




                        </div>

                    </div>
                    <div class="col-lg-6 " >

                        <div class="row ">

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="date">NCR opening date:</label>
                                    <b>{{data.date}}</b>
                                </div>
                            </div>

                              <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="time">NCR opening Time:</label>
                                   <b>{{data.time}}</b>
                                </div>
                            </div>


                               <div class="col-lg-12 " >
                                    <div class="form-group">
                                        <label for="detection_workstation">Detection workstation:</label>
                                       <b>{{data.detection_workstation}}</b>
                                    </div>
                                </div>



                                 <div class="col-lg-12 ">
                                    <div class="form-group">
                                        <label for="software_version">Trainset & Car No:</label>

                                        <b>{{data.location_id}}   {{data.sel_car}}</b>

                                       
                                    </div>
                                </div>





                                 <div class="col-lg-12 " >
                                    <div class="form-group">
                                        <label for="serial_no">Serial no/Traceability:</label>
                                       <b>{{data.serial_no}}</b>
                                    </div>
                                </div>



                                 <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="green_red_channel">Green/Red Channel :</label>
                                    <b>data.green_red_channel</b>

                                    </div>
                                </div>



                        </div>
                        
                    </div>

                </div>

                <hr>

                <div class="row " style="padding: 20px;">

                    <div class="col-3"> 
                        <h2>Title</h2>
                    </div>
                    <div class="col-9">

                        <b>Defect Criteria:</b><br><br>

                        

                            {% if 1 == data.chkMinor %}
                                <label><input type="checkbox" name="chkMinor" id="chkMinor" checked> Minor </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkMinor" id="chkMinor"> Minor </label><br>
                            {% endif %}

                            {% if 1 == data.chkMajor %}
                                <label><input type="checkbox" name="chkMajor" id="chkMajor" checked> Major </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkMajor" id="chkMajor"> Major </label><br>
                            {% endif %}

                            {% if 1 == data.chkCritical %}
                                <label><input type="checkbox" name="chkCritical" id="chkCritical" checked> Critical </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkCritical" id="chkCritical"> Critical </label><br>
                            {% endif %}

                        
                    </div>


                </div>

                <div class="row " style="padding: 20px;">

                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="specification">Specification: </label>
                            <b>{{data.specification}}</b>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_description">Defect Description (Actual vs Specification):</label>
                           <b>{{data.defect_description}}</b>
                        </div>
                    </div>


                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="defect_date">Defect  Date (DD/MM/YYYY):</label>
                            <b>{{data.defect_date|date:'d/m/Y'}}</b>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="defect_time">Defect Time:</label>
                           <b>{{data.defect_time}}</b>
                        </div>
                    </div>



                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="defect_source">Defect Source (Work Station):</label>
                                <b>{{data.defect_source}}</b>
                                </div>
                            </div>



                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="supplier_name">Supplier Name: </label>
                           <b>{{data.supplier_name}}</b>
                        </div>
                    </div>










                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_location">Defect location (on part/on assembly/location on the car): </label>
                           <b>{{data.defect_location}}</b>
                        </div>
                    </div>

                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_detected_by">Defect detected by (Name and Function): </label>
                           <b>{{data.defect_detected_by}}</b>
                        </div>
                    </div>

                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_detected_workstation">Defect detected workstation
:</label>
                           <b>{{data.defect_detected_workstation}}</b>
                        </div>
                    </div>


                     <div class="col-md-6">
                        <div class="form-group">
                            <label for="no_of_parts_deloverd">No of parts delivered to line/plant ?: </label><br>
                           <b>{{data.no_of_parts_deloverd}}</b>
                        </div>
                    </div>

                      <div class="col-md-6">
                        <div class="form-group">
                            <label for="no_of_defective_parts">No of defective parts identified in the line/plant?: </label><br>
                           <b>{{data.no_of_defective_parts}}</b>
                        </div>
                    </div>

                     <div class="col-md-12">
                        <br>
                     </div>

                   


                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="active_deviations">Active Deviations:</label>
                            <b>{{data.active_deviations}}</b>
                        </div>
                    </div>



                    <div class="col-md-2">

                         {% if 1 == data.chk_Internal %}
                                <label><input type="checkbox" name="chk_Internal" id="chk_Internal" checked> Internal </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_Internal" id="chk_Internal"> Internal </label>
                            {% endif %}

                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_Supplier %}
                                <label><input type="checkbox" name="chk_Supplier" id="chk_Supplier" checked> Supplier </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_Supplier" id="chk_Supplier"> Supplier </label>
                            {% endif %}

                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_TWL %}
                                <label><input type="checkbox" name="chk_TWL" id="chk_TWL" checked> Other TWL Shop or Area </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_TWL" id="chk_TWL"> Other TWL Shop or Area </label>
                            {% endif %}


                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_Transportation %}
                                <label><input type="checkbox" name="chk_Transportation" id="chk_Transportation" checked> Transportation Damage </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chk_Transportation" id="chk_Transportation"> Transportation Damage </label><br>
                            {% endif %}


                    </div>



                </div>

                <div class="row " style="padding: 20px;">

                    <div class="col-6"> 

                        <h5>OK</h5>

                            <div class="form-group">
                               
                                {% if data.ok_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.ok_img }}" style="width: 60px;">
                                    </div>
                                {% endif %}
                               
                            </div>
                        
                    </div>
                    <div class="col-6"> 
                        <h5>NOT OK</h5>

                         <div class="form-group">
                            
                                {% if data.notok_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.notok_img }}" style="width: 60px;">
                                    </div>
                                {% endif %}
                               
                            </div>

                    </div>

                </div>


                <div class="row " style="padding: 20px;">


                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="initial_analysis">Initial analysis (Defective part, Contributing dimension / Characteristics/ Welding/ Visual/Process)- Characteristics:</label><br>
                            <b>{{data.initial_analysis}}</b>
                        </div>
                    </div>



                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="attachments_files">Attachments (file/ppt/job cards):</label>
                        
                            <b>data.attachments_files</b>
                        </div>
                    </div>

                    <div class="col-md-8"></div>







                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="responsibility">RESPONSIBILITY: </label>
                           <b>{{data.responsibility}}</b>
                        </div>
                    </div>

                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="supplier_name2">SUPPLIER NAME: </label>
                           <b>{{data.supplier_name}}</b>
                        </div>
                    </div>

                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="invoice_number">INVOICE NUMBER: </label>
                            <b>{{data.invoice_number}}</b>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="non_conforming_part_disposition">NON CONFORMING PART DISPOSITION: </label>
                           <b>{{data.non_conforming_part_disposition}}</b>
                        </div>
                    </div>

                      <div class="col-md-4">
                        <div class="form-group">
                            <label for="responsible_for_execution">Responsible for execution of the disposition: </label>
                           <b>{{data.responsible_for_execution}}</b>
                        </div>
                    </div>


                    <div class="col-md-3">
                        <b>REWORK-</b>This disposition is for non-conforming material that can be reworked without adverse effect on safety, performance, interchangeability, reliability, or quality
                    </div>

                    <div class="col-md-3">
                        <b>RETURN TO VENDOR-</b> This disposition is applicable when the material discrepancy is the responsibility of the supplier and other dispositions are not recommended as material shall be sent to supplier for fault containment at supplier end

                    </div>

                    <div class="col-md-3">
                        <b>SCRAP- </b>The non-conforming material cannot be used for its intended purposes and cannot be reworked or used as is. The nonconforming product is discarded.

                    </div>

                    <div class="col-md-3">
                        <b>USE AS IT IS-</b> This disposition is to bring the nonconforming material to an acceptable condition but which may not totally conform to the applicable drawings or specifications

                    </div>

                    <div class="col-md-12">

                    <br>
                    <hr>

                    </div>


                    <div class="col-md-3">

                        <b>Containment action</b><br>
                        1. Store stock to be check<br>
                        2. Line stock to be check<br>
                        3. Green \ Red to be checked


                    </div>

                     <div class="col-md-9">
                        <b>{{data.containment_action}}</b>
                    </div>




                </div>



                <div class="row " style="padding: 20px;">

                    <div class="col-6"> 

                          <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_by">Corrective action by: </label>
                                   <b>{{data.corrective_action_by}}</b>
                                </div>
                            </div>

                              <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_designation">Designation: </label>
                                  <b>{{data.corrective_action_designation}}</b>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_date">*Date (DD/MM/YYYY):</label>
                                   <b>{{data.corrective_action_date|date:'d/m/Y'}}</b>
                                </div>
                            </div>



                            <div class="col-md-12">



                                {% if data.signature_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.signature_img }}" style="width: 60px;">
                                    </div>
                                {% endif %}

                            </div>

                    </div>
                    <div class="col-6"> 


                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_by">Approved by: </label>
                                   <b>{{data.approved_by}}</b>
                                </div>
                            </div>

                              <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_designation">Designation: </label>
                                  <b>{{data.approved_designation}}</b>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_date">*Date (DD/MM/YYYY):</label>
                                   <b>{{data.approved_date|date:'d/m/Y'}}</b>
                                </div>
                            </div>



                            <div class="col-md-12">
                               

                                {% if data.signature_img2 %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.signature_img2 }}" style="width: 60px;">
                                    </div>
                                {% endif %}

                            </div>

                    </div>

                </div>


                <div class="row " style="padding: 20px;">

                    <div class="col-6"> 

                        <h1>Corrective action Implementation</h1>
                        <div class="row ">

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_name">Name: </label>
                               <b>{{data.action_name}}</b>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="action_date">*Date (DD/MM/YYYY):</label>
                              <b>{{data.action_date|date:'d/m/Y'}}</b>
                            </div>
                        </div>



                        <div class="col-md-6">
                          
                            {% if data.signature_img3 %}
                                <div class="col-lg-4">
                                    <img src="/static/uploads/{{ data.signature_img3 }}" style="width: 60px;">
                                </div>
                            {% endif %}
                        </div>

                        </div>


                        
                    </div>

                     <div class="col-6"> 

                        <h1>Verification of implementation</h1>
                        <div class="row ">

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="verification_name">Name: </label>
                               <b>{{data.verification_name}}</b>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="verification_date">*Date (DD/MM/YYYY):</label>
                               <b>{{data.verification_date|date:'d/m/Y'}}</b>
                            </div>
                        </div>



                        <div class="col-md-6">
                          
                            {% if data.signature_img4 %}
                                <div class="col-lg-4">
                                    <img src="/static/uploads/{{ data.signature_img4 }}" style="width: 60px;">
                                </div>
                            {% endif %}
                        </div>

                        </div>


                        
                    </div>

                </div>



                <div class="row " style="padding: 20px;">

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="inp_root_cause">ROOT CAUSE:</label>
                                <br><b>{{data.inp_root_cause}}</b>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="occurrence">Occurrence:</label><br>
                                <b>{{data.occurrence}}</b>
                            </div>
                        </div>

                         <div class="col-md-12">
                            <div class="form-group">
                                <label for="detection">Detection:</label><br>
                                <b>{{data.detection}}</b>
                            </div>
                        </div>


                            <div class="col-md-12 ">
                                <label for="">Corrective actions:</label>
                                <table id="example2" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Corrective Action ID</th>
                                            <th>Corrective Action Owner </th>
                                            <th>Corrective Action Description</th>
                                            <th>Corrective Action Update</th>
                                            <th>Corrective Action Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>


                                        {% for Corrective_data in Corrective_data %}
                                            <tr>
                                                <td>{{ Corrective_data.corrective_action_id }}</td>
                                                <td>{{ Corrective_data.corrective_action_owner }}</td>
                                                <td>{{ Corrective_data.corrective_action_description }}</td>
                                                <td>{{ Corrective_data.corrective_action_update }}</td>
                                                <td>{{ Corrective_data.corrective_action_status }}</td>

                                           
                                            </tr>
                                        {% empty %}
                                            <tr>
                                                <td colspan="5" class="text-center text-muted">No corrective  actions available</td>
                                            </tr>
                                        {% endfor %}




                                    </tbody>
                                </table>
                            </div>





                         <div class="col-md-12">
                            <div class="form-group">
                                <label for="effectiveness">EFFECTIVENESS:</label><br>
                                <b>{{data.effectiveness}}</b>
                            </div>
                        </div>

                    


                </div>

                <div class="row " style="padding: 20px;">

                    <div class="col-12 mb-4"> <h5>COST OF NON - QUALITY</h5> </div>

                     
                    <div class="col-6 mb-4"> 
                        <b>DESCRIPTION OF UNDERTAKEN ACITONS</b>
                    </div>
                    <div class="col-6"> 
                        <b>COST IN RUPEES</b> 
                    </div>

                

                    <div class="col-12 mt-4"> 

                        <div class="row">

                            <div class="col-6"> 
                                <label>*SORTING/ REWORK </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <b>{{data.cost_1}}</b>
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*DETECTION /DISMANTLING</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                   <b>{{data.cost_2}}</b>
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*ADDITIONAL HANDLING </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <b>{{data.cost_3}}</b>
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*TRANSPORT COSTS</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                   <b>{{data.cost_4}}</b>
                                </div>
                            </div>

                        </div>

                          <div class="row">

                            <div class="col-6"> 
                                <label>*TOOL/ MACHINE BREAKDOWN </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <b>{{data.cost_5}}</b>
                                </div>
                            </div>

                        </div>

                          <div class="row">

                            <div class="col-6"> 
                                <label>*ADMINISTRATIVE CHARGE</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <b>{{data.cost_6}}</b>
                                </div>
                            </div>

                        </div>


                        <div class="row">

                            <div class="col-6"> 
                                <b>*TOTAL COST RECOVERY AMOUNT</b> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <h1>{{data.total_cost}}</h1>

                                </div>
                            </div>

                        </div>

                        <div class="row">

                            <div class="col-12"> 
                                <span class="text-primary">* Final cost recovery amount will be calculated and submitted after defined curative actions are completion</span> 
                            </div>

                        </div>


                        
                        
                    </div>


                </div>

                <div class="row " style="padding: 20px;">
                    <div class="col-12">  
                        <b>NCR Closure( final)</b>

                    </div>

                    <div class="col-4">  

                            <div class="form-group">
                                <label for="no_of_day_open">No. Of Days NCR Remained Open:</label>
                               <b>{{data.no_of_day_open}}</b>
                            </div>
                       
                    </div>

                     <div class="col-8">  
                                    
                        <div class="raw">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="physical_closure">Physical Closure:</label>
                                    <b>{{data.physical_closure}}</b>
                                </div>
                            </div>

                                <div class="col-md-12">
                                <div class="form-group">
                                    <label for="physical_closure">Physical Closure With RCA- CAPA :</label>
                                   <b>{{data.physical_closure_rca_capa}}</b>
                                </div>
                            </div>

                        </div>

                    </div>


                     <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="fnl_name">Name:</label>
                                       <b>{{data.fnl_name}}</b>
                                    </div>
                                </div>

                                 <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="fnl_name">Designation:</label>
                                       <b>{{data.fnl_designation}}</b>
                                    </div>
                                </div>


                                  <div class="col-md-4">
                                  
                                    {% if data.signature_img5 %}
                                        <div class="col-lg-4">
                                            <img src="/static/uploads/{{ data.signature_img5 }}" style="width: 60px;">
                                        </div>
                                    {% endif %}
                                </div>


                                    
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="fnl_date">*Date (DD/MM/YYYY):</label>
                                       <b>{{data.fnl_date|date:'d/m/Y'}}</b>
                                    </div>
                                </div>





                </div>





            







            
{% endblock sb_admin_content %}
{% block sb_admin_js %}
<script>




   
</script>

{% endblock sb_admin_js %}
