{% extends "django_sb_admin/base.html" %}
<!doctype html>
{% block sb_admin_header %}
  {% block branding %}
    <img src="/static/Riyadh-metro-logo.png" style="background: transparent;width: 60px;">
    <!-- <h1 id="site-name">Asset Optima</h1> -->
  {% endblock %}
{% endblock sb_admin_header %}
{% block sb_admin_content %}
              <!-- Page Heading -->

            <div class="row mb-3">
                <div class="col-lg-6">
                    <h3 class="page-header">
                       NCR (Non-Conformity Report) Generation
                    </h3>
                  
                </div>

                 <div class="col-lg-6 mb-3">
    
    
                    <a href="/forms/ncr_register/"><button class="btn btn-primary btn-icon-split float-right m-2" > 
                    <span class="icon text-white-50">
                        <i class="fas fa-angle-left"></i>
                        </span>             
                    <span class="text">Back</span>
                    </button></a>
                
                </div>

            </div>

            <form id="addNCRForm"> 

                <div class="row " style="padding: 20px;">

                      <div class="col-lg-12 " >
                            <div class="form-group">
                                {% if data.ncr_status == 1 %}
                                    <h3 class="text-danger"> Closed </h3>
                                {% else %}
                                    <h3 class="text-success"> Open </h3>
                                {% endif %}
                            </div>

                        </div>

                    <div class="col-lg-6 " >
                        <div class="row ">

                              
                         

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="ncr_gen_id">NON-CONFORMITY REPORT No:</label>
                                    <input type="text" class="form-control" id="ncr_gen_id"  name="ncr_gen_id" value="{{data.ncr_gen_id}}" readonly>
                                    <div class="invalid-feedback" >
                                    Please enter NON-CONFORMITY REPORT No.
                                    </div>
                                </div>
                            </div>

                              <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="project_name">PROJECT NAME:</label>
                                    <input type="text" class="form-control" id="project_name"  name="project_name" value="{{data.project_name}}" readonly>
                                    <div class="invalid-feedback" >
                                    Please enter PROJECT NAME.
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="inspector_name">Name of the inspector (NCR Raised):</label>
                                    <input type="text" class="form-control" id="inspector_name"  name="inspector_name" value="{{data.inspector_name}}">
                                    <div class="invalid-feedback" >
                                    Please enter Name of the inspector (NCR Raised).
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="asset_type">*PART Description /ASSEMBLY NAME:</label>
                                    {% if request.session.user_Role == 1 %}
                                    <select class="form-control" id="asset_type" name="asset_type" required="required" onchange="getAssetSerialNumber();">
                                    <option value="">--  Select PART Description /ASSEMBLY NAME  --</option>
                                    {% for asset_type in asset_types %}
                                    {% if asset_type.asset_type != '' %}
                                        {% if asset_type.asset_type == data.asset_type %}
                                            <option value="{{asset_type.asset_type}}" selected>{{asset_type.asset_type}} ( {{asset_type.project}} )</option>
                                        {% else %}
                                            <option value="{{asset_type.asset_type}}">{{asset_type.asset_type}} ( {{asset_type.project}} )</option>
                                        {% endif %}
                                            
                                        {% endif %}
                                    {% endfor %}
                                    </select>
                                    {% else %}  
                                    <select class="form-control" id="asset_type" name="asset_type" required="required" onchange="getAssetSerialNumber();">
                                    <option value="">--  Select PART Description /ASSEMBLY NAME  --</option>
                                    {% for asset_type in asset_types %}
                                    {% if asset_type.asset_type != '' %}
                                        {% if asset_type.asset_type == data.asset_type %}
                                            <option value="{{asset_type.asset_type}}" selected>{{asset_type.asset_type}} </option>
                                        {% else %}
                                            <option value="{{asset_type.asset_type}}">{{asset_type.asset_type}} </option>
                                        {% endif %}
                                            
                                        {% endif %}
                                    {% endfor %}
                                    </select>
                                    {% endif %}  
                                    <div class="invalid-feedback">
                                    Please select PART Description /ASSEMBLY NAME.
                                    </div>
                                </div>
                            </div>



                            <div class="col-lg-12 d-none hide" >
                                <div class="form-group">
                                    <label for="assembly_name">PART Description /ASSEMBLY NAME:</label>
                                    <input type="text" class="form-control" id="assembly_name"  name="assembly_name" value="{{data.assembly_name}}">
                                    <div class="invalid-feedback" >
                                    Please enter PART Description /ASSEMBLY NAME.
                                    </div>
                                </div>
                            </div>

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="assembly_no">PART or ASSEMBLY No:</label>
                                    <input type="text" class="form-control" id="assembly_no"  name="assembly_no" value="{{data.assembly_no}}">
                                    <div class="invalid-feedback" >
                                    Please enter PART or ASSEMBLY No.
                                    </div>
                                </div>
                            </div>

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="drawing_no">Drawing No :</label>
                                    <input type="text" class="form-control" id="drawing_no"  name="drawing_no" value="{{data.drawing_no}}">
                                    <div class="invalid-feedback" >
                                    Please enter Drawing No .
                                    </div>
                                </div>
                            </div>




                        </div>

                    </div>
                    <div class="col-lg-6 " >

                        <div class="row ">

                             <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="date">NCR opening date:</label>
                                    <input type="text" class="form-control" id="date"  name="date" value="{{data.date}}" readonly>
                                    <div class="invalid-feedback" >
                                    Please enter NCR opening date.
                                    </div>
                                </div>
                            </div>

                              <div class="col-lg-12 " >
                                <div class="form-group">
                                    <label for="time">NCR opening Time:</label>
                                    <input type="text" class="form-control" id="time"  name="time" value="{{data.time}}" readonly>
                                    <div class="invalid-feedback" >
                                    Please enter NCR opening Time.
                                    </div>
                                </div>
                            </div>


                               <div class="col-lg-12 " >
                                    <div class="form-group">
                                        <label for="detection_workstation">Detection workstation:</label>
                                        <input type="text" class="form-control" id="detection_workstation"  name="detection_workstation" value="{{data.detection_workstation}}" >
                                        <div class="invalid-feedback" >
                                        Please enter Detection workstation.
                                        </div>
                                    </div>
                                </div>



                                 <div class="col-lg-12 ">
                                    <div class="form-group">
                                        <label for="software_version">Train set no(Ctrl + left mouse click to select multiple options):</label>

                                        <select class="form-control" id="location_id" name="location_id" multiple>
                                        <!-- <option value="">--  Select Train set no  --</option> -->
                                        {% for train_set_options in train_set_options %}
                                            {% if train_set_options.location_id == data.location_id %}
                                                <option value="{{train_set_options.location_id}}" selected>{{train_set_options.location_id}} </option>
                                            {% else %}
                                                <option value="{{train_set_options.location_id}}">{{train_set_options.location_id}} </option>
                                            {% endif %}
                                                
                                        {% endfor %}
                                        </select>


                                        <!-- <input type="text" class="form-control" id="location_id" name="location_id" value="{{data.location_id}}" > -->
                                        <div class="invalid-feedback">
                                        Please enter Train set no.
                                        </div>
                                    </div>
                                </div>




                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label for="sel_car">CAR(Ctrl + left mouse click to select multiple options):</label>
                                                
                                                    <select class="form-control" id="sel_car" name="sel_car" multiple>
                                                        <option value="DMA">DMA</option>
                                                        <option value="TC">TC</option>
                                                        <option value="DMB">DMB</option>
                                                    </select>



                                                    {% comment %} <input type="text" class="form-control" id="sel_car" name="sel_car" value="{{data.sel_car}}"> {% endcomment %}
                                                    <div class="invalid-feedback">
                                                    Please enter CAR.
                                                    </div>
                                                </div>
                                            </div>



                                <div class="col-lg-12 " >
                                    <div class="form-group">
                                        <label for="serial_no">Serial no/Traceability:</label>
                                        <select class="form-control" id="serial_no" name="serial_no">
                                        <option value="">--  Select Serial no/Traceability  --</option>
                                        {% for asset_serial_number in asset_serial_number %}
                                        {% if asset_serial_number.asset_serial_number != '' %}
                                        {% if asset_serial_number.asset_serial_number == data.serial_no %}
                                            <option value="{{asset_serial_number.asset_serial_number}}" selected>{{asset_serial_number.asset_serial_number}}</option>
                                            {% else %}
                                            <option value="{{asset_serial_number.asset_serial_number}}">{{asset_serial_number.asset_serial_number}}</option>
                                            {% endif %}
                                        {% endif %}
                                        {% endfor %}
                                        </select>
                                        {% comment %} <input type="text" class="form-control" id="serial_no" name="serial_no" value="{{data.serial_no}}"> {% endcomment %}
                                        <div class="invalid-feedback">
                                        Please enter Serial no/Traceability.
                                        </div>
                                    </div>
                                </div>


                                 <!-- <div class="col-lg-12 " >
                                    <div class="form-group">
                                        <label for="serial_no">Serial no/Traceability:</label>
                                        <input type="text" class="form-control" id="serial_no"  name="serial_no" value="{{data.serial_no}}" >
                                        <div class="invalid-feedback" >
                                        Please enter Serial no/Traceability.
                                        </div>
                                    </div>
                                </div> -->



                                 <div class="col-lg-12">
                                    <div class="form-group">
                                        <label for="green_red_channel">Green/Red Channel :</label>
                                    

                                        <select class="form-control" id="green_red_channel " name="green_red_channel" >
                                            {% if 'Green' == data.green_red_channel %}
                                            <option value="Green" selected>Green Channel Part</option>
                                            {% else %}
                                                <option value="Green">Green Channel Part</option>
                                            {% endif %}
                                            {% if 'Red' == data.green_red_channel %}
                                            <option value="Red" selected>Red Channel Part</option>
                                            {% else %}
                                                <option value="Red">Red Channel Part</option>
                                            {% endif %}
                                        </select>



                                        {% comment %} <input type="text" class="form-control" id="green_red_channel" name="green_red_channel" value="{{data.green_red_channel}}"> {% endcomment %}
                                        <div class="invalid-feedback">
                                        Please enter Green/Red Channel .
                                        </div>
                                    </div>
                                </div>






                              







                        </div>
                        
                    </div>

                </div>

                <hr>

                <div class="row " style="padding: 20px;">

                    <div class="col-3"> 
                        <h2>Title</h2>
                    </div>
                    <div class="col-9">

                        <b>Defect Criteria:</b><br><br>

                        

                            {% if 1 == data.chkMinor %}
                                <label><input type="checkbox" name="chkMinor" id="chkMinor" checked> Minor </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkMinor" id="chkMinor"> Minor </label><br>
                            {% endif %}

                            {% if 1 == data.chkMajor %}
                                <label><input type="checkbox" name="chkMajor" id="chkMajor" checked> Major </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkMajor" id="chkMajor"> Major </label><br>
                            {% endif %}

                            {% if 1 == data.chkCritical %}
                                <label><input type="checkbox" name="chkCritical" id="chkCritical" checked> Critical </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chkCritical" id="chkCritical"> Critical </label><br>
                            {% endif %}

                        
                    </div>


                </div>

                <div class="row " style="padding: 20px;">

                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="specification">Specification: </label>
                            <input type="text" class="form-control" id="specification"  name="specification" value="{{data.specification}}" >
                            <div class="invalid-feedback">
                            Specification.
                            </div>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_description">Defect Description (Actual vs Specification):</label>
                            <textarea class="form-control" id="defect_description" name="defect_description">{{data.defect_description}}</textarea>
                            <div class="invalid-feedback">
                            Please enter Defect Description (Actual vs Specification).
                            </div>
                        </div>
                    </div>


                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="defect_date">Defect  Date (DD/MM/YYYY):</label>
                            <input type="text" autocomplete="off" class="form-control date-time" id="defect_date" name="defect_date" value="{{data.defect_date|date:'d/m/Y'}}">
                            <div class="invalid-feedback">
                            Please enter Defect  Date.
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="defect_time">Defect Time:</label>
                            <input type="time" class="form-control" id="defect_time"  name="defect_time" value="{{data.defect_time}}">
                            <div class="invalid-feedback">
                            Please enter Defect Time.
                            </div>
                        </div>
                    </div>



                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="defect_source">Defect Source (Work Station):</label>
                                
                                    <select class="form-control" id="defect_source" name="defect_source" >
                                        <option value="" selected>Select Defect Source (Work Station)</option>
                                        {% if 'Schedule Preventive Maintenance' == data.defect_source %}
                                        <option value="Schedule Preventive Maintenance" selected>Schedule Preventive Maintenance</option>
                                        {% else %}
                                            <option value="Schedule Preventive Maintenance">Schedule Preventive Maintenance</option>
                                        {% endif %}
                                        {% if 'Main Line' == data.defect_source %}
                                        <option value="Main Line" selected>Main Line</option>
                                        {% else %}
                                            <option value="Main Line">Main Line</option>
                                        {% endif %}

                                        {% if 'Depot Fault' == data.defect_source %}
                                        <option value="Depot" selected>Depot</option>
                                        {% else %}
                                            <option value="Depot">Depot</option>
                                        {% endif %}

                                        {% if 'Cyclic Check' == data.defect_source %}
                                        <option value="Cyclic Check" selected>Cyclic Check</option>
                                        {% else %}
                                            <option value="Cyclic Check">Cyclic Check</option>
                                        {% endif %}

                                        {% if 'Overhaul' == data.defect_source %}
                                        <option value="Overhaul" selected>Overhaul</option>
                                        {% else %}
                                            <option value="Overhaul">Overhaul</option>
                                        {% endif %}
                                    
                                    </select>




                                    {% comment %} <input type="text" class="form-control" id="defect_source" name="defect_source" value="{{data.defect_source}}"> {% endcomment %}
                                    <div class="invalid-feedback">
                                    Please enter Defect Source (Work Station).
                                    </div>
                                </div>
                            </div>



                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="supplier_name">Supplier Name: </label>
                            <input type="text" class="form-control" id="supplier_name"  name="supplier_name" value="{{data.supplier_name}}" >
                            <div class="invalid-feedback">
                            Supplier Name.
                            </div>
                        </div>
                    </div>










                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_location">Defect location (on part/on assembly/location on the car): </label>
                            <input type="text" class="form-control" id="defect_location"  name="defect_location" value="{{data.defect_location}}" >
                            <div class="invalid-feedback">
                            Defect location (on part/on assembly/location on the car).
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_detected_by">Defect detected by (Name and Function): </label>
                            <input type="text" class="form-control" id="defect_detected_by"  name="defect_detected_by" value="{{data.defect_detected_by}}" >
                            <div class="invalid-feedback">
                            Defect detected by (Name and Function)
                            </div>
                        </div>
                    </div>

                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="defect_detected_workstation">Defect detected workstation
:</label>
                            <textarea class="form-control" id="defect_detected_workstation" name="defect_detected_workstation">{{data.defect_detected_workstation}}</textarea>
                            <div class="invalid-feedback">
                            Please enter Defect detected workstation.
                            </div>
                        </div>
                    </div>


                     <div class="col-md-6">
                        <div class="form-group">
                            <label for="no_of_parts_deloverd">No of parts delivered to line/plant ?: </label>
                            <input type="text" class="form-control" id="no_of_parts_deloverd"  name="no_of_parts_deloverd" value="{{data.no_of_parts_deloverd}}" >
                            <div class="invalid-feedback">
                            No of parts delivered to line/plant ?
                            </div>
                        </div>
                    </div>

                      <div class="col-md-6">
                        <div class="form-group">
                            <label for="no_of_defective_parts">No of defective parts identified in the line/plant?: </label>
                            <input type="text" class="form-control" id="no_of_defective_parts"  name="no_of_defective_parts" value="{{data.no_of_defective_parts}}" >
                            <div class="invalid-feedback">
                            No of defective parts identified in the line/plant?
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="active_deviations">Active Deviations:</label>
                        </div>
                    </div>


                    <div class="col-md-3 d-none">
                        <div class="form-group">
                            <label for="active_deviations">Active Deviations:</label>
                            <input type="text" class="form-control" id="active_deviations" name="active_deviations" value="{{data.active_deviations}}" >
                            <div class="invalid-feedback">
                                Please enter Active Deviations.
                            </div>
                        </div>
                    </div>



                    <div class="col-md-2">

                         {% if 1 == data.chk_Internal %}
                                <label><input type="checkbox" name="chk_Internal" id="chk_Internal" checked> Internal </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_Internal" id="chk_Internal"> Internal </label>
                            {% endif %}

                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_Supplier %}
                                <label><input type="checkbox" name="chk_Supplier" id="chk_Supplier" checked> Supplier </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_Supplier" id="chk_Supplier"> Supplier </label>
                            {% endif %}

                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_TWL %}
                                <label><input type="checkbox" name="chk_TWL" id="chk_TWL" checked> Other TWL Shop or Area </label>
                            {% else %}
                                <label><input type="checkbox" name="chk_TWL" id="chk_TWL"> Other TWL Shop or Area </label>
                            {% endif %}


                    </div>

                    <div class="col-md-2">

                         {% if 1 == data.chk_Transportation %}
                                <label><input type="checkbox" name="chk_Transportation" id="chk_Transportation" checked> Transportation Damage </label><br>
                            {% else %}
                                <label><input type="checkbox" name="chk_Transportation" id="chk_Transportation"> Transportation Damage </label><br>
                            {% endif %}


                    </div>



                </div>

                <div class="row " style="padding: 20px;">

                    <div class="col-12">
                        <b>Evidence/ related figures</b>
                     </div>


                    <div class="col-4"> 

                        
                            <div class="form-group">
                                <input type="file" class="form-control" id="ok_img"  name="ok_img" accept="image/*" multiple>

                                <!-- {% if data.ok_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.ok_img }}" style="width: 60px;">
                                    </div>
                                {% endif %} -->
                               
                            </div>
                        
                    </div>

                    <div class="col-8"> 

                        {% for imageList in imageList %}

                            <img src="/static/uploads/{{ imageList.file_path }}" style="width: 90px;">
                            <input class="btn btn-sm" type="button" value="Delete" onClick="deleteNCRImage('{{ imageList.img_id }}');">



                        {% empty %}
                            <tr>
                                <td colspan="6" class="text-center text-muted">No images available</td>
                            </tr>
                        {% endfor %}

                    </div>

                    <!-- <div class="col-6 d-none"> 
                        <h1>NOT OK</h1>

                         <div class="form-group">
                                <input type="file" class="form-control" id="notok_img"  name="notok_img" accept="image/*">

                                {% if data.notok_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.notok_img }}" style="width: 60px;">
                                    </div>
                                {% endif %}
                               
                            </div>

                    </div> -->

                </div>


                <div class="row " style="padding: 20px;">


                     <div class="col-md-12">
                        <div class="form-group">
                            <label for="initial_analysis">Initial analysis (Defective part, Contributing dimension / Characteristics/ Welding/ Visual/Process)- Characteristics:</label>
                            <textarea class="form-control" id="initial_analysis" name="initial_analysis">{{data.initial_analysis}}</textarea>
                            <div class="invalid-feedback">
                            Please enter Initial analysis (Defective part, Contributing dimension / Characteristics/ Welding/ Visual/Process)- Characteristics.
                            </div>
                        </div>
                    </div>



                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="attachments_files">Attachments (file/ppt/job cards):</label>
                        

                            <select class="form-control" id="attachments_files " name="attachments_files" >
                                {% if 'Yes' == data.attachments_files %}
                                <option value="Yes" selected>Yes</option>
                                {% else %}
                                    <option value="Yes">Yes</option>
                                {% endif %}
                                {% if 'No' == data.attachments_files %}
                                <option value="No" selected>No</option>
                                {% else %}
                                    <option value="No">No</option>
                                {% endif %}
                            </select>



                            {% comment %} <input type="text" class="form-control" id="attachments_files" name="attachments_files" value="{{data.attachments_files}}"> {% endcomment %}
                            <div class="invalid-feedback">
                            Please enter Attachments.
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8"></div>







                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="responsibility">RESPONSIBILITY: </label>
                            <input type="text" class="form-control" id="responsibility"  name="responsibility" value="{{data.responsibility}}" >
                            <div class="invalid-feedback">
                            Please enter RESPONSIBILITY.
                            </div>
                        </div>
                    </div>

                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="supplier_name2">SUPPLIER NAME: </label>
                            <input type="text" class="form-control" id="supplier_name2"  name="supplier_name2" readonly value="{{data.supplier_name}}" >
                            <div class="invalid-feedback">
                            Please enter SUPPLIER NAME.
                            </div>
                        </div>
                    </div>

                     <div class="col-md-4">
                        <div class="form-group">
                            <label for="invoice_number">INVOICE NUMBER: </label>
                            <input type="text" class="form-control" id="invoice_number"  name="invoice_number" value="{{data.invoice_number}}" >
                            <div class="invalid-feedback">
                            Please enter INVOICE NUMBER.
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="non_conforming_part_disposition">NON CONFORMING PART DISPOSITION: </label>
                            <input type="text" class="form-control" id="non_conforming_part_disposition"  name="non_conforming_part_disposition" value="{{data.non_conforming_part_disposition}}" >
                            <div class="invalid-feedback">
                            Please enter NON CONFORMING PART DISPOSITION.
                            </div>
                        </div>
                    </div>

                      <div class="col-md-4">
                        <div class="form-group">
                            <label for="responsible_for_execution">Responsible for execution of the disposition: </label>
                            <input type="text" class="form-control" id="responsible_for_execution"  name="responsible_for_execution" value="{{data.responsible_for_execution}}" >
                            <div class="invalid-feedback">
                            Please enter Responsible for execution of the disposition.
                            </div>
                        </div>
                    </div>


                    <div class="col-md-3">
                        <b>REWORK-</b>This disposition is for non-conforming material that can be reworked without adverse effect on safety, performance, interchangeability, reliability, or quality
                    </div>

                    <div class="col-md-3">
                        <b>RETURN TO VENDOR-</b> This disposition is applicable when the material discrepancy is the responsibility of the supplier and other dispositions are not recommended as material shall be sent to supplier for fault containment at supplier end

                    </div>

                    <div class="col-md-3">
                        <b>SCRAP- </b>The non-conforming material cannot be used for its intended purposes and cannot be reworked or used as is. The nonconforming product is discarded.

                    </div>

                    <div class="col-md-3">
                        <b>USE AS IT IS-</b> This disposition is to bring the nonconforming material to an acceptable condition but which may not totally conform to the applicable drawings or specifications

                    </div>

                    <div class="col-md-12">

                    <br>
                    <hr>

                    </div>


                    <div class="col-md-3">

                        <b>Containment action</b><br>
                        1. Store stock to be check<br>
                        2. Line stock to be check<br>
                        3. Green \ Red to be checked


                    </div>

                     <div class="col-md-4">
                        <div class="form-group">


                             <select class="form-control" id="containment_action " name="containment_action" >
                                {% if 'Done' == data.containment_action %}
                                <option value="Done" selected>Done</option>
                                {% else %}
                                    <option value="Done">Done</option>
                                {% endif %}
                                {% if 'Not Done' == data.containment_action %}
                                <option value="Not Done" selected>Not Done</option>
                                {% else %}
                                    <option value="Not Done">Not Done</option>
                                {% endif %}
                            </select>


                           
                        </div>
                    </div>




                </div>



                <div class="row " style="padding: 20px;">

                    <div class="col-6"> 

                          <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_by">Corrective action by: </label>
                                    <input type="text" class="form-control" id="corrective_action_by"  name="corrective_action_by" value="{{data.corrective_action_by}}" >
                                    <div class="invalid-feedback">
                                    Please enter Corrective action by.
                                    </div>
                                </div>
                            </div>

                              <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_designation">Designation: </label>
                                    <input type="text" class="form-control" id="corrective_action_designation"  name="corrective_action_designation" value="{{data.corrective_action_designation}}" >
                                    <div class="invalid-feedback">
                                    Please enter Designation.
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="corrective_action_date">Date (DD/MM/YYYY):</label>
                                    <input type="text" autocomplete="off"  class="form-control date-time" id="corrective_action_date" name="corrective_action_date" value="{{data.corrective_action_date|date:'d/m/Y'}}">
                                    <div class="invalid-feedback">
                                    Please enter Date.
                                    </div>
                                </div>
                            </div>



                            <div class="col-md-12">




                                <div class="form-group">
                                    <label for="signature_img">Signature: </label>
                                    <input type="file" class="form-control" id="signature_img"  name="signature_img"  accept="image/*">
                                    <div class="invalid-feedback">
                                    Please upload Signature.
                                    </div>
                                </div>

                                {% if data.signature_img %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.signature_img }}" style="width: 60px;">
                                    </div>
                                {% endif %}

                            </div>

                    </div>
                    <div class="col-6"> 


                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_by">Approved by: </label>
                                    <input type="text" class="form-control" id="approved_by"  name="approved_by" value="{{data.approved_by}}" >
                                    <div class="invalid-feedback">
                                    Please enter Corrective action by.
                                    </div>
                                </div>
                            </div>

                              <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_designation">Designation: </label>
                                    <input type="text" class="form-control" id="approved_designation"  name="approved_designation" value="{{data.approved_designation}}" >
                                    <div class="invalid-feedback">
                                    Please enter Designation.
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="approved_date">Date (DD/MM/YYYY):</label>
                                    <input type="text" autocomplete="off"  class="form-control date-time" id="approved_date" name="approved_date" value="{{data.approved_date|date:'d/m/Y'}}">
                                    <div class="invalid-feedback">
                                    Please enter Date.
                                    </div>
                                </div>
                            </div>



                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="signature_img2">Signature: </label>
                                    <input type="file" class="form-control" id="signature_img2"  name="signature_img2"  accept="image/*">
                                    <div class="invalid-feedback">
                                    Please upload Signature.
                                    </div>
                                </div>

                                {% if data.signature_img2 %}
                                    <div class="col-lg-4">
                                        <img src="/static/uploads/{{ data.signature_img2 }}" style="width: 60px;">
                                    </div>
                                {% endif %}

                            </div>

                    </div>

                </div>


                <div class="row " style="padding: 20px;">

                    <div class="col-6"> 

                        <h1>Corrective action Implementation</h1>
                        <div class="row ">

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_name">Name: </label>
                                <input type="text" class="form-control" id="action_name"  name="action_name" value="{{data.action_name}}" >
                                <div class="invalid-feedback">
                                Please enter Name.
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="action_date">Date (DD/MM/YYYY):</label>
                                <input type="text" autocomplete="off"  class="form-control date-time" id="action_date" name="action_date" value="{{data.action_date|date:'d/m/Y'}}">
                                <div class="invalid-feedback">
                                Please enter Date.
                                </div>
                            </div>
                        </div>



                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="signature_img3">Signature: </label>
                                <input type="file" class="form-control" id="signature_img3"  name="signature_img3"  accept="image/*">
                                <div class="invalid-feedback">
                                Please upload Signature.
                                </div>
                            </div>
                            {% if data.signature_img3 %}
                                <div class="col-lg-4">
                                    <img src="/static/uploads/{{ data.signature_img3 }}" style="width: 60px;">
                                </div>
                            {% endif %}
                        </div>

                        </div>


                        
                    </div>

                     <div class="col-6"> 

                        <h1>Verification of implementation</h1>
                        <div class="row ">

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="verification_name">Name: </label>
                                <input type="text" class="form-control" id="verification_name"  name="verification_name" value="{{data.verification_name}}" >
                                <div class="invalid-feedback">
                                Please enter Name.
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="verification_date">Date (DD/MM/YYYY):</label>
                                <input type="text" autocomplete="off"  class="form-control date-time" id="verification_date" name="verification_date" value="{{data.verification_date|date:'d/m/Y'}}">
                                <div class="invalid-feedback">
                                Please enter Date.
                                </div>
                            </div>
                        </div>



                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="signature_img4">Signature: </label>
                                <input type="file" class="form-control" id="signature_img4"  name="signature_img4"  accept="image/*">
                                <div class="invalid-feedback">
                                Please upload Signature.
                                </div>
                            </div>
                            {% if data.signature_img4 %}
                                <div class="col-lg-4">
                                    <img src="/static/uploads/{{ data.signature_img4 }}" style="width: 60px;">
                                </div>
                            {% endif %}
                        </div>

                        </div>


                        
                    </div>

                </div>



                <div class="row " style="padding: 20px;">

                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="root_cause_analysis">Root cause analysis :</label>
                                <select class="form-control" id="root_cause_analysis " name="root_cause_analysis" required="required">
                                    {% if 'Not necessary' == data.root_cause_analysis %}
                                    <option value="Not necessary" selected>Not necessary</option>
                                    {% else %}
                                        <option value="Not necessary">Not necessary</option>
                                    {% endif %}
                                    {% if 'Necessary but done by the supplier' == data.root_cause_analysis %}
                                    <option value="Necessary but done by the supplier" selected>Necessary but done by the supplier</option>
                                    {% else %}
                                        <option value="Necessary but done by the supplier">Necessary but done by the supplier</option>
                                    {% endif %}
                                    {% if 'Necessary by internal' == data.ohe_required %}
                                    <option value="Necessary by internal" selected>Necessary by internal</option>
                                    {% else %}
                                        <option value="Necessary by internal">Necessary by internal</option>
                                    {% endif %}
                                </select>
                                {% comment %} <input type="text" class="form-control" id="root_cause_analysis" name="root_cause_analysis" value="{{data.root_cause_analysis}}"> {% endcomment %}
                                <div class="invalid-feedback">
                                Please select Root cause analysis.
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="inp_root_cause">ROOT CAUSE:</label>
                                <textarea class="form-control" id="inp_root_cause" name="inp_root_cause">{{data.inp_root_cause}}</textarea>
                                <div class="invalid-feedback">
                                Please enter ROOT CAUSE.
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="occurrence">Occurrence:</label>
                                <textarea class="form-control" id="occurrence" name="occurrence">{{data.occurrence}}</textarea>
                                <div class="invalid-feedback">
                                Please enter Occurrence.
                                </div>
                            </div>
                        </div>

                         <div class="col-md-12">
                            <div class="form-group">
                                <label for="detection">Detection:</label>
                                <textarea class="form-control" id="detection" name="detection">{{data.detection}}</textarea>
                                <div class="invalid-feedback">
                                Please enter Detection.
                                </div>
                            </div>
                        </div>


                            <div class="col-md-12 ">
                                <label for="">Corrective actions:</label>
                                <table id="example2" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>Corrective Action ID</th>
                                            <th>Corrective Action Owner </th>
                                            <th>Corrective Action Description</th>
                                            <th>Corrective Action Update</th>
                                            <th>Corrective Action Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>


                                        {% for Corrective_data in Corrective_data %}
                                            <tr>
                                                <td>{{ Corrective_data.corrective_action_id }}</td>
                                                <td>{{ Corrective_data.corrective_action_owner }}</td>
                                                <td>{{ Corrective_data.corrective_action_description }}</td>
                                                <td>{{ Corrective_data.corrective_action_update }}</td>
                                                <td>{{ Corrective_data.corrective_action_status }}</td>

                                           
                                            </tr>
                                        {% empty %}
                                            <tr>
                                                <td colspan="5" class="text-center text-muted">No corrective  actions available</td>
                                            </tr>
                                        {% endfor %}




                                    </tbody>
                                </table>
                            </div>





                         <div class="col-md-12">
                            <div class="form-group">
                                <label for="effectiveness">EFFECTIVENESS:</label>
                                <textarea class="form-control" id="effectiveness" name="effectiveness">{{data.effectiveness}}</textarea>
                                <div class="invalid-feedback">
                                Please enter EFFECTIVENESS.
                                </div>
                            </div>
                        </div>

                    


                </div>

                <div class="row d-none hide" style="padding: 20px;">

                    <div class="col-12 mb-4"> <h5>COST OF NON - QUALITY</h5> </div>

                     
                    <div class="col-6 mb-4"> 
                        <b>DESCRIPTION OF UNDERTAKEN ACITONS</b>
                    </div>
                    <div class="col-6"> 
                        <b>COST IN RUPEES</b> 
                    </div>

                

                    <div class="col-12 mt-4"> 

                        <div class="row">

                            <div class="col-6"> 
                                <label>*SORTING/ REWORK </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_1" required  name="cost_1" value="{{data.cost_1}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*DETECTION /DISMANTLING</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_2" required name="cost_2" value="{{data.cost_2}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*ADDITIONAL HANDLING </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_3" required name="cost_3" value="{{data.cost_3}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>

                         <div class="row">

                            <div class="col-6"> 
                                <label>*TRANSPORT COSTS</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_4" required name="cost_4" value="{{data.cost_4}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>

                          <div class="row">

                            <div class="col-6"> 
                                <label>*TOOL/ MACHINE BREAKDOWN </label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_5" required name="cost_5" value="{{data.cost_5}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>

                          <div class="row">

                            <div class="col-6"> 
                                <label>*ADMINISTRATIVE CHARGE</label> 
                            </div>

                             <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="cost_6" required name="cost_6" value="{{data.cost_6}}" onchange="calculateTotal();">
                                </div>
                            </div>

                        </div>


                        <div class="row">

                            <div class="col-4"> 
                                <b>*TOTAL COST RECOVERY AMOUNT</b> <button type="button" onclick="calculateTotal();">Fetch Total</button>
                            </div>

                             <div class="col-8">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="total_cost" required name="total_cost" value="{{data.total_cost}}">
                                </div>
                            </div>

                        </div>

                        <div class="row">

                            <div class="col-12"> 
                                <span class="text-primary">* Final cost recovery amount will be calculated and submitted after defined curative actions are completion</span> 
                            </div>

                        </div>


                        
                        
                    </div>


                </div>

                <div class="row " style="padding: 20px;">
                    <div class="col-12">  
                        <b>NCR Closure( final)</b>

                    </div>

                  

                     <div class="col-4 d-none">  
                                    
                        <div class="raw">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="physical_closure">Physical Closure:</label>
                                    <input type="text" class="form-control" id="physical_closure"  name="physical_closure" value="{{data.physical_closure}}">
                                    <div class="invalid-feedback">
                                    Please enter Physical Closure.
                                    </div>
                                </div>
                            </div>

                                <div class="col-md-12">
                                <div class="form-group">
                                    <label for="physical_closure">Physical Closure With RCA- CAPA :</label>
                                    <input type="text" class="form-control" id="physical_closure_rca_capa"  name="physical_closure_rca_capa" value="{{data.physical_closure_rca_capa}}">
                                    <div class="invalid-feedback">
                                    Please enter Physical Closure With RCA- CAPA.
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>


                     <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="fnl_name">Name:</label>
                                        <input type="text" class="form-control" id="fnl_name"  name="fnl_name" value="{{data.fnl_name}}">
                                        <div class="invalid-feedback">
                                        Please enter Name.
                                        </div>
                                    </div>
                                </div>

                                 <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="fnl_name">Designation:</label>
                                        <input type="text" class="form-control" id="fnl_designation"  name="fnl_designation" value="{{data.fnl_designation}}">
                                        <div class="invalid-feedback">
                                        Please enter Designation.
                                        </div>
                                    </div>
                                </div>


                                  <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="signature_img5">Signature: </label>
                                        <input type="file" class="form-control" id="signature_img5"  name="signature_img5"  accept="image/*">
                                        <div class="invalid-feedback">
                                        Please upload Signature.
                                        </div>
                                    </div>
                                    {% if data.signature_img5 %}
                                        <div class="col-lg-4">
                                            <img src="/static/uploads/{{ data.signature_img5 }}" style="width: 60px;">
                                        </div>
                                    {% endif %}
                                </div>


                                    
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="fnl_date">NCR Closure Date (DD/MM/YYYY):</label>
                                        <input type="text" autocomplete="off"  class="form-control date-time" id="fnl_date" name="fnl_date" value="{{data.fnl_date|date:'d/m/Y'}}" onchange="getNumberOfDays();">
                                        <div class="invalid-feedback">
                                        Please enter Date.
                                        </div>
                                    </div>
                                </div>


                        <div class="col-4">  

                            <div class="form-group">
                                <label for="no_of_day_open">No. Of Days NCR Remained Open:</label>
                                <input type="text" class="form-control" id="no_of_day_open"  name="no_of_day_open" value="{{data.no_of_day_open}}">
                                <div class="invalid-feedback">
                                Please enter No. Of Days NCR Remained Open.
                                </div>
                            </div>
                       
                        </div>


                </div>








            <div class="row " style="padding: 20px;">
                <div class="col-12">  
                    <button type="submit" class="btn btn-primary mt-2" >Update </button>

                </div>
            </div>




            </form>








            
{% endblock sb_admin_content %}
{% block sb_admin_js %}
<script>


    $(document).ready(function() {


         $('#defect_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});

             $('#corrective_action_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});

            $('#approved_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});

           $('#action_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});

           $('#verification_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});

             $('#fnl_date').datepicker({
          autoclose: true,
          format: 'dd/mm/yyyy',});


               var input = '{{ data.sel_car }}';
           const resultArray = input.split(",").map(item => item.trim());

           console.log(resultArray)
            $('#sel_car').val(resultArray);

              var input2 = '{{ data.location_id }}';
           const resultArray2 = input2.split(",").map(item => item.trim());

           console.log(resultArray2)
            $('#location_id').val(resultArray2);




            var timeInput = document.getElementById('time');
        var time24 = timeInput.value;

        if (time24) {
            var [hour, minute, second] = time24.split(':');
            hour = parseInt(hour);
            var ampm = hour >= 12 ? 'PM' : 'AM';
            hour = hour % 12 || 12; // Convert 0 to 12

            var formattedTime = `${hour}:${minute} ${ampm}`;
            timeInput.value = formattedTime;
        }


    });

    function getNumberOfDays(){
        var date = $('#date').val();
        var fnl_date = $('#fnl_date').val();

        // Parse the first date (e.g., "July 3, 2025")
        const date1 = new Date(date);

        // Parse the second date (e.g., "03/07/2025" in dd/mm/yyyy format)
        const parts = fnl_date.split('/');
        const date2 = new Date(`${parts[2]}-${parts[1]}-${parts[0]}`); // yyyy-mm-dd format

        // Calculate the difference in milliseconds
        const diffInMs = Math.abs(date1 - date2);

        // Convert milliseconds to days
        const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));

        console.log(`Difference is ${diffInDays} day(s)`);

        $('#no_of_day_open').val(diffInDays);



    }



     function deleteNCRImage(id){

         swal({
            title: "Are you sure?",
            type: "warning",
            showCancelButton: true,
            confirmButtonClass: "btn-danger",
            confirmButtonText: "yes, delete it!",
            closeOnConfirm: false,
            width: '300px'
        },
        function(){
             $.ajax({
                url: "/forms/ncr_register/viewncr/",
                method: 'POST',
                dataType: 'json',
                headers: {'X-CSRFToken': '{{ csrf_token }}'},
                data : {
                    'id':id,
                    'st':1,
                },
                success: function (response) {
                    window.location.reload(); 
                }
            });     
        });

    }


      $("#asset_type").change(function () {                            
        var asset_type= $('select[name=asset_type]').val()
        $.ajax({
            url: "/forms/location_id_from_asset_type_ncr/",
            method: 'GET',
            dataType: 'json',
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            data : {
            'asset_type' : asset_type
            },
            success: function (response) {
                //console.log(response);
                var options = "";
                    $.each(response, function (i,value) {
                    if (value.id != ''){
                    options = options + "<option value="+value.id+">"+value.option+"</options>";
                    }
                });
                    var select = "<select>"+options+"</select>";
                $("#location_id").html(select);
                
                }
            }); 


        $.ajax({
        url: "/forms/get_all_Serialnumber_ncr/",
        method: 'GET',
        dataType: 'json',
        headers: {'X-CSRFToken': '{{ csrf_token }}'},
        data : {
        'asset_type' : asset_type,
        },
        success: function (response) {
            //console.log(response);
            var options = "<option value="+""+">"+"--  Select Serial no/Traceability  --"+"</options>";
                $.each(response, function (i,value) {
                if (value.id != ''){
                options = options + "<option value="+value.id+">"+value.option+"</options>";
                }
            });
                var select = "<select>"+options+"</select>";
            $("#serial_no").html(select);
            
            }
        }); 
    });




    function calculateTotal(){
        $('#total_cost').val(0);
        var cost_1 = $('#cost_1').val();
        var cost_2 = $('#cost_2').val();
        var cost_3 = $('#cost_3').val();
        var cost_4 = $('#cost_4').val();
        var cost_5 = $('#cost_5').val();
        var cost_6 = $('#cost_6').val();

        var totalValue = parseFloat(cost_1) + parseFloat(cost_2) + parseFloat(cost_3) + parseFloat(cost_4) + parseFloat(cost_5) + parseFloat(cost_6);

        $('#total_cost').val(totalValue);

    }



     $("#addNCRForm").submit(function(e) {
        e.preventDefault();

        var form = $('#addNCRForm')[0];  // Get the raw DOM form element
        var formData = new FormData(form);    // Create FormData object

        var sel_car= $('#sel_car').val()

        const select = document.getElementById("sel_car");
        const selectedValues = Array.from(select.selectedOptions).map(opt => opt.value);
        sel_car = selectedValues.join(", ");
        console.log(sel_car); // Logs: BMW, Audi, etc.

        var location_id= $('#location_id').val()

        const select2 = document.getElementById("location_id");
        const selectedValues2 = Array.from(select2.selectedOptions).map(opt => opt.value);
        location_id = selectedValues2.join(", ");
        console.log(location_id); // Logs: BMW, Audi, etc.


          var chkMinorV = document.getElementById('chkMinor').checked ? 1 : 0;
            var chkMajorV = document.getElementById('chkMajor').checked ? 1 : 0;
            var chkCriticalV = document.getElementById('chkCritical').checked ? 1 : 0;


              var chk_InternalV = document.getElementById('chk_Internal').checked ? 1 : 0;
            var chk_SupplierV = document.getElementById('chk_Supplier').checked ? 1 : 0;
            var chk_TWLV = document.getElementById('chk_TWL').checked ? 1 : 0;
            var chk_TransportationV = document.getElementById('chk_Transportation').checked ? 1 : 0;




        formData.append('id', '{{ data.id }}');
        formData.append('st', 8);
        formData.append('sel_car_val', sel_car);
        formData.append('location_id_val', location_id);
        formData.append('chkMinorV', chkMinorV);
        formData.append('chkMajorV', chkMajorV);
        formData.append('chkCriticalV', chkCriticalV);
        formData.append('chk_InternalV', chk_InternalV);
        formData.append('chk_SupplierV', chk_SupplierV);
        formData.append('chk_TWLV', chk_TWLV);
        formData.append('chk_TransportationV', chk_TransportationV);

        $.ajax({
            url: "/forms/ncr_register/addncr/",
            method: 'POST',
            data: formData,
            dataType: 'json',
            processData: false,     // Prevent jQuery from processing data
            contentType: false,     // Let browser set content type including boundaries
            headers: {'X-CSRFToken': '{{ csrf_token }}'},

            success: function (response) {
                if (response.status == '1') {
                    swal('Successfully update NCR (Non-Conformity Report)');
                    setTimeout(function() {
                        window.location.reload();
                    }, 3000); // 3000 milliseconds = 3 seconds

                } else {
                    swal('Failed to update NCR (Non-Conformity Report)');
                }
            },
            error: function () {
                swal('An error occurred while submitting the data.');
            }
        });
    });




   
</script>

{% endblock sb_admin_js %}
